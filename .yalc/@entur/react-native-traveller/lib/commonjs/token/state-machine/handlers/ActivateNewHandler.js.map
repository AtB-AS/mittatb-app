{"version":3,"sources":["ActivateNewHandler.ts"],"names":["activateNewHandler","abtTokensService","s","activateTokenResponse","activateToken","tokenId","attestationData","accountId","state","activatedData"],"mappings":";;;;;;;AACA;;AACA;;AAEe,SAASA,kBAAT,CACbC,gBADa,EAEC;AACd,SAAO,yCAAoB,CAAC,aAAD,CAApB,EAAqC,MAAOC,CAAP,IAAa;AACvD,UAAMC,qBAAqB,GAAG,MAAMF,gBAAgB,CAACG,aAAjB,CAClCF,CAAC,CAACG,OADgC,EAElCH,CAAC,CAACI,eAFgC,CAApC;AAKA,qCAAqBJ,CAAC,CAACG,OAAvB,EAAgCF,qBAAqB,CAACE,OAAtD;AACA,WAAO;AACLE,MAAAA,SAAS,EAAEL,CAAC,CAACK,SADR;AAELC,MAAAA,KAAK,EAAE,UAFF;AAGLH,MAAAA,OAAO,EAAEH,CAAC,CAACG,OAHN;AAILI,MAAAA,aAAa,EAAEN;AAJV,KAAP;AAMD,GAbM,CAAP;AAcD","sourcesContent":["import type { AbtTokensService } from '../../abt-tokens-service';\nimport { verifyCorrectTokenId } from '../utils';\nimport { StateHandler, stateHandlerFactory } from '../HandlerFactory';\n\nexport default function activateNewHandler(\n  abtTokensService: AbtTokensService\n): StateHandler {\n  return stateHandlerFactory(['ActivateNew'], async (s) => {\n    const activateTokenResponse = await abtTokensService.activateToken(\n      s.tokenId,\n      s.attestationData\n    );\n\n    verifyCorrectTokenId(s.tokenId, activateTokenResponse.tokenId);\n    return {\n      accountId: s.accountId,\n      state: 'AddToken',\n      tokenId: s.tokenId,\n      activatedData: activateTokenResponse,\n    };\n  });\n}\n"]}