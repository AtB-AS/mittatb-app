{"version":3,"sources":["AddTokenHandler.ts"],"names":["addTokenHandler","s","activatedData","certificate","tokenId","tokenValidityEnd","tokenValidityStart","accountId","logger","info","undefined","state"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;AAEe,SAASA,eAAT,GAAyC;AACtD,SAAO,yCAAoB,CAAC,UAAD,CAApB,EAAkC,MAAOC,CAAP,IAAa;AACpD,UAAM;AACJC,MAAAA,aAAa,EAAE;AACbC,QAAAA,WADa;AAEbC,QAAAA,OAFa;AAGbC,QAAAA,gBAHa;AAIbC,QAAAA;AAJa,OADX;AAOJC,MAAAA;AAPI,QAQFN,CARJ;;AAUAO,mBAAOC,IAAP,CAAY,WAAZ,EAAyBC,SAAzB,EAAoC;AAAEH,MAAAA,SAAF;AAAaH,MAAAA;AAAb,KAApC;;AAEA,UAAM,sBACJG,SADI,EAEJH,OAFI,EAGJD,WAHI,EAIJG,kBAJI,EAKJD,gBALI,CAAN;AAOA,WAAO;AACLE,MAAAA,SADK;AAELI,MAAAA,KAAK,EAAE,wBAFF;AAGLP,MAAAA;AAHK,KAAP;AAKD,GAzBM,CAAP;AA0BD","sourcesContent":["import { logger } from '../../../logger';\nimport { addToken } from '../../../native';\nimport { StateHandler, stateHandlerFactory } from '../HandlerFactory';\n\nexport default function addTokenHandler(): StateHandler {\n  return stateHandlerFactory(['AddToken'], async (s) => {\n    const {\n      activatedData: {\n        certificate,\n        tokenId,\n        tokenValidityEnd,\n        tokenValidityStart,\n      },\n      accountId,\n    } = s;\n\n    logger.info('add_token', undefined, { accountId, tokenId });\n\n    await addToken(\n      accountId,\n      tokenId,\n      certificate,\n      tokenValidityStart,\n      tokenValidityEnd\n    );\n    return {\n      accountId,\n      state: 'VerifyInspectionAction',\n      tokenId,\n    };\n  });\n}\n"]}