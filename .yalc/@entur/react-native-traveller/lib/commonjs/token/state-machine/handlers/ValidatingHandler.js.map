{"version":3,"sources":["ValidatingHandler.ts"],"names":["validatingHandler","abtTokensService","s","tokens","listTokens","tokenFound","some","t","id","token","tokenId","state"],"mappings":";;;;;;;AAGA;;AAEe,SAASA,iBAAT,CACbC,gBADa,EAEC;AACd,SAAO,yCAAoB,CAAC,YAAD,CAApB,EAAoC,MAAOC,CAAP,IAAa;AACtD,UAAMC,MAA0B,GAAG,MAAMF,gBAAgB,CAACG,UAAjB,EAAzC;AACA,UAAMC,UAAU,GAAGF,MAAM,CAACG,IAAP,CAAaC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASN,CAAC,CAACO,KAAF,CAAQC,OAApC,CAAnB;AACA,WAAO;AAAEC,MAAAA,KAAK,EAAEN,UAAU,GAAG,OAAH,GAAa;AAAhC,KAAP;AACD,GAJM,CAAP;AAKD","sourcesContent":["import type { AbtTokensService } from '../../abt-tokens-service';\nimport type { ListTokensResponse } from '../../types';\nimport type { StateHandler } from '../HandlerFactory';\nimport { stateHandlerFactory } from '../HandlerFactory';\n\nexport default function validatingHandler(\n  abtTokensService: AbtTokensService\n): StateHandler {\n  return stateHandlerFactory(['Validating'], async (s) => {\n    const tokens: ListTokensResponse = await abtTokensService.listTokens();\n    const tokenFound = tokens.some((t) => t.id === s.token.tokenId);\n    return { state: tokenFound ? 'Valid' : 'DeleteLocal' };\n  });\n}\n"]}