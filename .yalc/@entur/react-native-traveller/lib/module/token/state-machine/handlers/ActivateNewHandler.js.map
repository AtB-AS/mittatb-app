{"version":3,"sources":["ActivateNewHandler.ts"],"names":["verifyCorrectTokenId","stateHandlerFactory","activateNewHandler","abtTokensService","s","activateTokenResponse","activateToken","tokenId","attestationData","accountId","state","activatedData"],"mappings":"AACA,SAASA,oBAAT,QAAqC,UAArC;AACA,SAAuBC,mBAAvB,QAAkD,mBAAlD;AAEA,eAAe,SAASC,kBAAT,CACbC,gBADa,EAEC;AACd,SAAOF,mBAAmB,CAAC,CAAC,aAAD,CAAD,EAAkB,MAAOG,CAAP,IAAa;AACvD,UAAMC,qBAAqB,GAAG,MAAMF,gBAAgB,CAACG,aAAjB,CAClCF,CAAC,CAACG,OADgC,EAElCH,CAAC,CAACI,eAFgC,CAApC;AAKAR,IAAAA,oBAAoB,CAACI,CAAC,CAACG,OAAH,EAAYF,qBAAqB,CAACE,OAAlC,CAApB;AACA,WAAO;AACLE,MAAAA,SAAS,EAAEL,CAAC,CAACK,SADR;AAELC,MAAAA,KAAK,EAAE,UAFF;AAGLC,MAAAA,aAAa,EAAEN;AAHV,KAAP;AAKD,GAZyB,CAA1B;AAaD","sourcesContent":["import type { AbtTokensService } from '../../abt-tokens-service';\nimport { verifyCorrectTokenId } from '../utils';\nimport { StateHandler, stateHandlerFactory } from '../HandlerFactory';\n\nexport default function activateNewHandler(\n  abtTokensService: AbtTokensService\n): StateHandler {\n  return stateHandlerFactory(['ActivateNew'], async (s) => {\n    const activateTokenResponse = await abtTokensService.activateToken(\n      s.tokenId,\n      s.attestationData\n    );\n\n    verifyCorrectTokenId(s.tokenId, activateTokenResponse.tokenId);\n    return {\n      accountId: s.accountId,\n      state: 'AddToken',\n      activatedData: activateTokenResponse,\n    };\n  });\n}\n"]}