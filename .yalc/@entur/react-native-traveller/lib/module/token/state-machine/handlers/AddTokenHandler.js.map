{"version":3,"sources":["AddTokenHandler.ts"],"names":["addToken","stateHandlerFactory","addTokenHandler","_","getClientState","s","certificate","tokenId","tokenValidityEnd","tokenValidityStart","activatedData","accountId","state"],"mappings":"AACA,SAASA,QAAT,QAAyB,iBAAzB;AAEA,SAAuBC,mBAAvB,QAAkD,mBAAlD;AAEA,eAAe,SAASC,eAAT,CACbC,CADa,EAEbC,cAFa,EAGC;AACd,SAAOH,mBAAmB,CAAC,CAAC,UAAD,CAAD,EAAe,MAAOI,CAAP,IAAa;AACpD,UAAM;AACJC,MAAAA,WADI;AAEJC,MAAAA,OAFI;AAGJC,MAAAA,gBAHI;AAIJC,MAAAA;AAJI,QAKFJ,CAAC,CAACK,aALN;AAOA,UAAM;AAAEC,MAAAA;AAAF,QAAgBP,cAAc,EAApC;AACA,UAAMJ,QAAQ,CACZW,SADY,EAEZJ,OAFY,EAGZD,WAHY,EAIZG,kBAJY,EAKZD,gBALY,CAAd;AAOA,WAAO;AAAEI,MAAAA,KAAK,EAAE;AAAT,KAAP;AACD,GAjByB,CAA1B;AAkBD","sourcesContent":["import type { ClientStateRetriever } from '../../..';\nimport { addToken } from '../../../native';\nimport type { AbtTokensService } from '../../abt-tokens-service';\nimport { StateHandler, stateHandlerFactory } from '../HandlerFactory';\n\nexport default function addTokenHandler(\n  _: AbtTokensService,\n  getClientState: ClientStateRetriever\n): StateHandler {\n  return stateHandlerFactory(['AddToken'], async (s) => {\n    const {\n      certificate,\n      tokenId,\n      tokenValidityEnd,\n      tokenValidityStart,\n    } = s.activatedData;\n\n    const { accountId } = getClientState();\n    await addToken(\n      accountId,\n      tokenId,\n      certificate,\n      tokenValidityStart,\n      tokenValidityEnd\n    );\n    return { state: 'Valid' };\n  });\n}\n"]}