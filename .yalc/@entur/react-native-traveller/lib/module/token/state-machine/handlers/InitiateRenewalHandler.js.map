{"version":3,"sources":["InitiateRenewalHandler.ts"],"names":["getSecureToken","PayloadAction","stateHandlerFactory","initiateRenewalHandler","abtTokensService","s","signedToken","accountId","addRemoveToken","renewTokenResponse","renewToken","state","initiatedData"],"mappings":"AAAA,SAASA,cAAT,QAA+B,iBAA/B;AAEA,SAASC,aAAT,QAA8B,uBAA9B;AAEA,SAASC,mBAAT,QAAoC,mBAApC;AAEA,eAAe,SAASC,sBAAT,CACbC,gBADa,EAEC;AACd,SAAOF,mBAAmB,CAAC,CAAC,iBAAD,CAAD,EAAsB,MAAOG,CAAP,IAAa;AAC3D,UAAMC,WAAW,GAAG,MAAMN,cAAc,CAACK,CAAC,CAACE,SAAH,EAAc,CACpDN,aAAa,CAACO,cADsC,CAAd,CAAxC;AAGA,UAAMC,kBAAkB,GAAG,MAAML,gBAAgB,CAACM,UAAjB,CAA4BJ,WAA5B,CAAjC;AACA,WAAO;AACLC,MAAAA,SAAS,EAAEF,CAAC,CAACE,SADR;AAELI,MAAAA,KAAK,EAAE,eAFF;AAGLC,MAAAA,aAAa,EAAEH;AAHV,KAAP;AAKD,GAVyB,CAA1B;AAWD","sourcesContent":["import { getSecureToken } from '../../../native';\nimport type { AbtTokensService } from '../../abt-tokens-service';\nimport { PayloadAction } from '../../../native/types';\nimport type { StateHandler } from '../HandlerFactory';\nimport { stateHandlerFactory } from '../HandlerFactory';\n\nexport default function initiateRenewalHandler(\n  abtTokensService: AbtTokensService\n): StateHandler {\n  return stateHandlerFactory(['InitiateRenewal'], async (s) => {\n    const signedToken = await getSecureToken(s.accountId, [\n      PayloadAction.addRemoveToken,\n    ]);\n    const renewTokenResponse = await abtTokensService.renewToken(signedToken);\n    return {\n      accountId: s.accountId,\n      state: 'AttestRenewal',\n      initiatedData: renewTokenResponse,\n    };\n  });\n}\n"]}