{"version":3,"sources":["ValidatingHandler.ts"],"names":["stateHandlerFactory","validatingHandler","abtTokensService","s","tokens","listTokens","tokenFound","some","t","id","token","tokenId","state"],"mappings":"AAGA,SAASA,mBAAT,QAAoC,mBAApC;AAEA,eAAe,SAASC,iBAAT,CACbC,gBADa,EAEC;AACd,SAAOF,mBAAmB,CAAC,CAAC,YAAD,CAAD,EAAiB,MAAOG,CAAP,IAAa;AACtD,UAAMC,MAA0B,GAAG,MAAMF,gBAAgB,CAACG,UAAjB,EAAzC;AACA,UAAMC,UAAU,GAAGF,MAAM,CAACG,IAAP,CAAaC,CAAD,IAAOA,CAAC,CAACC,EAAF,KAASN,CAAC,CAACO,KAAF,CAAQC,OAApC,CAAnB;AACA,WAAO;AAAEC,MAAAA,KAAK,EAAEN,UAAU,GAAG,OAAH,GAAa;AAAhC,KAAP;AACD,GAJyB,CAA1B;AAKD","sourcesContent":["import type { AbtTokensService } from '../../abt-tokens-service';\nimport type { ListTokensResponse } from '../../types';\nimport type { StateHandler } from '../HandlerFactory';\nimport { stateHandlerFactory } from '../HandlerFactory';\n\nexport default function validatingHandler(\n  abtTokensService: AbtTokensService\n): StateHandler {\n  return stateHandlerFactory(['Validating'], async (s) => {\n    const tokens: ListTokensResponse = await abtTokensService.listTokens();\n    const tokenFound = tokens.some((t) => t.id === s.token.tokenId);\n    return { state: tokenFound ? 'Valid' : 'DeleteLocal' };\n  });\n}\n"]}