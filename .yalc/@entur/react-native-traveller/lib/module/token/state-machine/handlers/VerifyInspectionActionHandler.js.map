{"version":3,"sources":["VerifyInspectionActionHandler.ts"],"names":["logger","stateHandlerFactory","verifyInspectionActionHandler","abtTokensService","accountId","tokenId","state","info","undefined","toggleToken","overrideExisting"],"mappings":"AAAA,SAASA,MAAT,QAAuB,iBAAvB;AAGA,SAASC,mBAAT,QAAoC,mBAApC;AAEA,eAAe,SAASC,6BAAT,CACbC,gBADa,EAEC;AACd,SAAOF,mBAAmB,CACxB,CAAC,wBAAD,CADwB,EAExB,OAAO;AAAEG,IAAAA,SAAF;AAAaC,IAAAA,OAAb;AAAsBC,IAAAA;AAAtB,GAAP,KAAyC;AACvCN,IAAAA,MAAM,CAACO,IAAP,CAAY,2BAAZ,EAAyCC,SAAzC,EAAoD;AAClDJ,MAAAA,SADkD;AAElDC,MAAAA,OAFkD;AAGlDC,MAAAA;AAHkD,KAApD;AAKA,UAAMH,gBAAgB,CAACM,WAAjB,CAA6BJ,OAA7B,EAAsC;AAC1CK,MAAAA,gBAAgB,EAAE;AADwB,KAAtC,CAAN;AAIA,WAAO;AACLN,MAAAA,SADK;AAELE,MAAAA,KAAK,EAAE,OAFF;AAGLD,MAAAA;AAHK,KAAP;AAKD,GAjBuB,CAA1B;AAmBD","sourcesContent":["import { logger } from '../../../logger';\nimport type { AbtTokensService } from '../../abt-tokens-service';\nimport type { StateHandler } from '../HandlerFactory';\nimport { stateHandlerFactory } from '../HandlerFactory';\n\nexport default function verifyInspectionActionHandler(\n  abtTokensService: AbtTokensService\n): StateHandler {\n  return stateHandlerFactory(\n    ['VerifyInspectionAction'],\n    async ({ accountId, tokenId, state }) => {\n      logger.info('mobiletoken_status_change', undefined, {\n        accountId,\n        tokenId,\n        state,\n      });\n      await abtTokensService.toggleToken(tokenId, {\n        overrideExisting: false,\n      });\n\n      return {\n        accountId,\n        state: 'Valid',\n        tokenId,\n      };\n    }\n  );\n}\n"]}